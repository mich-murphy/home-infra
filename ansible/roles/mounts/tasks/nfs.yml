---
- name: install nfs requirements
  ansible.builtin.apt:
    name:
      - nfs-common
    state: present

- name: check whether mount folder exists
  ansible.builtin.stat:
    path: /mnt/data
  register: st

- name: create folder for mount
  ansible.builtin.file:
    path: /mnt/data
    state: directory
    mode: "0775"
    owner: media
    group: media
  when: not st.stat.exists

- name: mount network share
  ansible.posix.mount:
    src: "10.77.1.101:/mnt/slow/media"
    path: /mnt/data
    fstype: nfs
    opts: "rw,sync"
    state: mounted
